CONTIKI_PROJECT = udp-client udp-server
TARGET=z1
# MAKE_ROUTING=MAKE_ROUTING_RPL_CLASSIC

udp-server:
ifeq ($(IDS_SERVER),1)
$(info 'SERVER')
	DEFINES+=IDS_SERVER=1 
	DEFINES+=IDS_CLIENT=0
	MODULES=os/net/routing/ids-app
	BUILD_DIR_CONFIG=server
endif

udp-client-ids: 
ifeq ($(IDS_CLIENT),1)
$(info 'IDSCLIENT')
	DEFINES+=IDS_SERVER=0
	DEFINES+=IDS_CLIENT=1
	DEFINES+=RPL_CONF_DEFAULT_LEAF_ONLY=1
	MODULES=os/net/routing/ids-app
	BUILD_DIR_CONFIG=ids-client
$(info DEFINE $(DEFINES))
endif

udp-client-mal:
ifeq ($(IDS_CLIENT),2)
$(info 'MALICIOUS')
	DEFINES+=IDS_SERVER=0
	DEFINES+=IDS_CLIENT=0
	DEFINES+=MALICIOUS=1
	DEFINES+=RPL_CONF_DIS_INTERVAL=60
	DEFINES+=MAL_DIS=0
	DEFINES+=MAL_BLACKHOLE=1
	BUILD_DIR_CONFIG=malicious
endif

#For clone only or malicious and clone
udp-client-clone:
ifeq ($(IDS_CLIENT),3)
$(info 'CLONE ONLY')
	DEFINES+=IDS_SERVER=0
	DEFINES+=IDS_CLIENT=0
	DEFINES+=MALICIOUS=0
	DEFINES+=CLONE_ATTACK=1
	DEFINES+=MAL_DIS=0
	BUILD_DIR_CONFIG=clone_only
endif

ifeq ($(IDS_CLIENT),4)
$(info 'MALICIOUS and CLONE')
	DEFINES+=IDS_SERVER=0
	DEFINES+=IDS_CLIENT=0
	DEFINES+=MALICIOUS=1
	DEFINES+=CLONE_ATTACK=1
	DEFINES+=MAL_DIS=1
	DEFINES+=RPL_CONF_DIS_INTERVAL=0
	BUILD_DIR_CONFIG=clone_malicious
endif

#defined packet_counters to give me stats for nbr and IDS
udp-client:
ifeq ($(IDS_CLIENT),0)
$(info 'NORMAL')
	DEFINES+=IDS_SERVER=0
	DEFINES+=IDS_CLIENT=0
	DEFINES+=IDS_OF=1
	DEFINES+=MALICIOUS=0
	DEFINES+=CLONE_ATTACK=0
	DEFINES+=LINK_STATS_CONF_PACKET_COUNTERS=1  
	DEFINES+=UIP_CONF_STATISTICS=1
	# DEFINES+=LINK_STATS_CONF_ETX_FROM_PACKET_COUNT=1
	BUILD_DIR_CONFIG=normal
endif

CONTIKI=../..
include $(CONTIKI)/Makefile.include

# all: $(CONTIKI_PROJECT)
## enable packet counting